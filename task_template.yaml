source_paths:
  # 数组， 源路径，目前只支持图片文件。支持文件路径及目录路径
  # 当路径为目录路径时, 目录内的所有图片文件会被插入到数组中
  - ""
  - ""

target_paths:
  # 数组， 目标路径，只支持图片和视频文件，支持文件路径及目录路径
  # 当路径为目录路径时, 目录内的所有图片和视频文件路径会被插入到数组中
  - ""
  - ""

output:
  path: "" # 输出路径, 必须为目录路径, 且必须存在, 否则会报错。当输出路径为目录路径时，输出文件名会自动生成。
  prefix: "" # 输出文件名前缀
  subfix: "" # 输出文件名后缀

processor_list: # 处理器列表，顺序执行
  - type: "face_swapper" # 可选值：face_swapper, face_enhancer, expression_restorer, frame_enhancer
    model: "inswapper_128_fp16" # 可选值：inswapper_128_fp16, inswapper_128, 默认值：inswapper_128_fp16
    parameters: ~ # 当模型为 inswapper_128_fp16 时，不需要设置其他参数
  - type: "face_enhancer"
    model: "codeformer" # 可选值：codeformer, gfpgan_1.2, gfpgan_1.3, gfpgan_1.4, 默认值：codeformer
    parameters: # 都是key value 对象, value 值必须是字符串
      blend_factor: "0.8" # 设置脸部混合度，范围 0-1，默认值（缺省值）： 0.8
  - type: "expression_restorer"
    model: "live_portrait" # 可选值：live_portrait, 默认值：live_portrait
    parameters:
     restore_factor: "0.8" # 恢复的强度，范围 0-1， 默认值（缺省值）： 0.8
  - type: "frame_enhancer"
    # model 可选值 real_hatgan_x4 real_esrgan_x2 real_esrgan_x2_fp16 real_esrgan_x4 real_esrgan_x4_fp16 real_esrgan_x8 real_esrgan_x8_fp16
    model: "real_hatgan_x4"
    parameters:
      enhance_factor: "0.8" # 增强强度，范围 0-1，默认值（缺省值）： 0.8

image:
  output_quality: 100 # 设置图片输出质量。默认: 100, 范围: 0 to 100 at 1, 示例: 60
  output_resolution: # 输出图片分辨率 默认值：原图片的分辨率
    width: 1920
    height: 1080
  output_format: "png" # 输出图片格式 可选值： png, jpg, jpeg

video:
  segment_duration: 0 # 启用视频分段的处理的片段时长（秒）。默认: 0, 示例: 30
  video_encoder: "libx264" # 指定视频编码器。默认: libx264, 选择: libx264 libx265 libvpx-vp9 h264_nvenc hevc_nvenc h264_amf hevc_amf, 示例: libx265
  video_preset: "veryslow" # 输出视频编码器预设。默认: veryslow, 选择: ultrafast superfast veryfast faster fast medium slow slower veryslow, 示例: faster
  video_quality: 100 # 设置输出的视频质量。默认: 80, 范围: 0 to 100 at 1, 示例: 60
  audio_encoder: "aac" # 设置音频编码器。默认: aac, 选择: aac libmp3lame libopus libvorbis, 示例: libmp3lame
  skip_audio: false # 设置是否跳过音频处理。默认: false, 选择: true false, 示例: true
  frame_format: "png" # 设置提取的视频帧格式。默认: png, 选择: png jpg bmp

face_analyser:
  face_detector:
    # 设置脸部检测模型。默认: yolo, 选择: retina scrfd yolo
    # 这是一个数组，当选择多个时，使用选择的多个检测模型。若数组中存在重复值，只使用一次，并使用所有检测结果进行最优人脸选择。
    models:
      - "yolo"
      - "retina"
      - "scrfd"
    size:
      # 设置face detector的大小。默认: 640x640, 选择: 160x160 320x320 480x480 512x512 640x640
      width: 640
      height: 640
    min_score: 0.5 # 设置face detector的最小置信度。默认: 0.5, 范围: 0 to 1 at 0.05, 示例: 0.7
  face_landmarker:
    models:
      - "2dfan4" # 数组，设置face landmarker的模型。默认: 2dfan4, 选择: 2dfan4 peppa_wutz
    min_score: 0.5 # 设置face landmarker的最小置信度。默认: 0.5, 范围: 0 to 1 at 0.05, 示例: 0.7
  face_selector:
    mode: "many" # 设置face selector模式。默认: many, 选择: many one reference, 示例: one
    order: "left-right" # 设置face selector的顺序。默认: left-right, 选择: left-right right-left top-bottom bottom-top small-large large-small best-worst worst-best, 示例: best-worst
    age_start:  # 设置face selector的年龄起始值。示例: 10
    age_end: # 设置face selector的年龄结束值。示例: 80
    gender: # 设置face selector的性别。默认: None, 选择: male female, 示例: male
    race: # 设置face selector的种族。默认: None, 选择: asian white black middle_eastern, 示例: asian
    reference_face_position: 0 # 设置参考的脸部在图片中的位置。默认: 0, 示例: 1
    reference_face_distance: 0.6 # 设置参考脸和目标脸的相似度（distance）。默认: 0.6, 范围: 0 to 1.5 at 0.05, 示例: 0.8
    reference_face_path: "" # 参考脸部的图片所在的路径，目前只支持单文件路径输入。

face_masker:
  occluder_model: "xseg_2" # 选择负责脸部遮罩的模型。默认: xseg_1, 选择: xseg_1 xseg_2, 示例: xseg_1
  parser_model: "bisenet_resnet_34" # 选择负责脸部区域蒙版的模型。默认: bisenet_resnet_34, 选择: bisenet_resnet_18 bisenet_resnet_34, 示例: bisenet_resnet_34
  mask_types: "box" # 设置脸部遮罩类型。默认: box, 选择: box occlusion region, 示例: box occlusion
  mask_blur: 0.3 # 设置脸部遮罩模糊度。默认: 0.3, 范围: 0 to 1 at 0.05, 示例: 0.6
  mask_padding: [ 0, 0, 0, 0 ] # 设置面部填充边界，默认顺序为top, right, bottom, left。默认: 0 0 0 0, 示例: [1, 2]
  mask_regions: "all" # 设置用于脸部遮罩的面部区域。默认: all, 选择: skin left-eyebrow right-eyebrow left-eye right-eye glasses nose mouth upper-lip lower-lip, 示例: left-eye right-eye eye-glasses
