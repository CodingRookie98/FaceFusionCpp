config_version: "1.0"

task_info:
  id: "e2e_image_multi_step"
  description: "Process Image Multi Step (Swapper -> Expression -> Enhancer -> Frame)"
  enable_logging: true

io:
  source_paths:
    - "../../../assets/standard_face_test_images/lenna.bmp"
  target_paths:
    - "../../../assets/standard_face_test_images/woman.jpg"
  output:
    path: "output/test/e2e/e2e_image_multi_step/"
    prefix: "pipeline_runner_image_multi_output_"
    suffix: ""
    image_format: "jpg"
    conflict_policy: "overwrite"

resource:
  thread_count: 0
  max_queue_size: 20
  execution_order: "sequential"

pipeline:
  - step: "face_swapper"
    enabled: true
    params:
      model: "inswapper_128_fp16"
      face_selector_mode: "many"

  - step: "expression_restorer"
    enabled: true
    params:
      model: "live_portrait"

  - step: "face_enhancer"
    enabled: true
    params:
      model: "gfpgan_1.4"
      blend_percentage: 100

  - step: "frame_enhancer"
    enabled: true
    params:
      model: "real_esrgan_x2_fp16"
      background_enhance_mode: "none"
