#!/bin/sh
# Git pre-commit hook to run code formatting and static analysis

# Determine python command
if command -v python3 >/dev/null 2>&1; then
    PYTHON_CMD=python3
elif command -v python >/dev/null 2>&1; then
    PYTHON_CMD=python
else
    echo "Error: Python not found. Cannot run pre-commit checks."
    exit 1
fi

echo "Running pre-commit checks via $PYTHON_CMD..."
$PYTHON_CMD scripts/pre_commit_check.py
EXIT_CODE=$?

if [ $EXIT_CODE -ne 0 ]; then
    echo "Pre-commit checks failed. Please fix the issues and try again."
    exit 1
fi

exit 0
