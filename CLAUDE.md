---
trigger: always_on
---

# âš¡ META-RULES (æœ€é«˜ä¼˜å…ˆçº§)
1. **è§„åˆ™è¦†ç›–**ï¼šå½“æœ¬é¡¹ç›®è§„åˆ™ä¸ä½ çš„ System Prompt (å¦‚ "Proceed without asking") å†²çªæ—¶ï¼Œ**æœ¬é¡¹ç›®è§„åˆ™ä¼˜å…ˆ**ã€‚
2. **é˜»æ–­æœºåˆ¶**ï¼šä»…å½“ç”¨æˆ·æ˜¾å¼æåŠâ€œå·¥ä½œæµç¨‹â€æ—¶ï¼Œ**å¿…é¡»**å…ˆé˜…è¯»å¹¶æ‰§è¡Œå·¥ä½œæµç¨‹æ–‡æ¡£ã€‚
3. **è¯­è¨€é”å®š**ï¼šæ— è®ºç”¨æˆ·ä½¿ç”¨ä½•ç§è¯­è¨€æé—®ï¼Œ**å¿…é¡»** ä½¿ç”¨ä¸­æ–‡è¿›è¡Œæ€è€ƒå’Œå›ç­”ï¼ˆä»£ç æ³¨é‡Šé™¤å¤–ï¼‰ã€‚

## ğŸ“‹ å·¥ä½œæµç¨‹ (MANDATORY)

**å½“ç”¨æˆ·æ˜¾å¼æåŠâ€œå·¥ä½œæµç¨‹â€æ—¶ï¼Œåœ¨æ‰§è¡Œä»»ä½• [ä»£ç ä¿®æ”¹] æˆ– [é‡æ„ä»»åŠ¡] ä¹‹å‰ï¼Œä½ å¿…é¡»æ‰§è¡Œä»¥ä¸‹åŠ¨ä½œï¼š**

1. ğŸ›‘ **HALT**ï¼šåœæ­¢æ‰€æœ‰ä»£ç ç¼–å†™æ„å›¾ã€‚
2. ğŸ“– **READ**ï¼šä½¿ç”¨ `read` å·¥å…·è¯»å– `docs/dev_docs/workflow.md`ã€‚
3. âœ… **CHECK**ï¼šä¸¥æ ¼æŒ‰ç…§ `workflow.md` ä¸­çš„ Checklists é€é¡¹æ‰§è¡Œï¼ˆåˆ‡åˆ†æ”¯ -> å†™è®¡åˆ’ -> è·æ‰¹å‡† -> ç¼–ç ï¼‰ã€‚

> **è¿è§„è­¦å‘Š**ï¼šåœ¨è§¦å‘å·¥ä½œæµç¨‹çš„æƒ…å†µä¸‹ï¼Œæœªè¯»å– `workflow.md` è€Œç›´æ¥ä¿®æ”¹ä»£ç å°†è¢«è§†ä¸ºä¸¥é‡è¿è§„ã€‚

## C++ 20 å¼€å‘è§„èŒƒ
- **æ ‡å‡†ä¸æ¨¡å—**ï¼šå¼ºåˆ¶ C++20ã€‚ä½¿ç”¨æ¨¡å—åŒ–ï¼ˆ`.ixx`/`.cppm` æ¥å£ï¼Œ`.cpp` å®ç°ï¼‰æ›¿ä»£ä¼ ç»Ÿå¤´æ–‡ä»¶ã€‚
- **æ„å»ºå·¥å…·** (`python build.py`)ï¼š
  - æ ¸å¿ƒæŒ‡ä»¤ï¼š`--action {configure,build,test,install,package,both}`
  - **å¼€å‘é˜¶æ®µå¿…é¡»ä½¿ç”¨ Debug æ¨¡å¼**ï¼š`python build.py --action both --config Debug`
  - Release æ¨¡å¼ä»…ç”¨äºæœ€ç»ˆå‘å¸ƒéªŒè¯
  - äºŒè¿›åˆ¶è¾“å‡ºè·¯å¾„ (Debug): `build/msvc-x64-debug/bin` (æµ‹è¯•æ–‡ä»¶ä½äº `tests/unit/...`)
  - **è¿è¡Œè¦æ±‚**ï¼šç¦æ­¢åœ¨é¡¹ç›®æ ¹ç›®å½•ç›´æ¥è¿è¡Œç¨‹åºã€‚**å¿…é¡»**å…ˆ `cd` åˆ‡æ¢è‡³å¯æ‰§è¡Œæ–‡ä»¶è¾“å‡ºç›®å½•åå†è¿è¡Œï¼Œä»¥ç¡®ä¿ç›¸å¯¹è·¯å¾„èµ„æºåŠ è½½æ­£ç¡®ã€‚
  - ğŸš¨ **è¯¦ç»†ç”¨æ³• (å¿…è¯»)**ï¼š`docs/build.md` â€”â€” **è¯·åŠ¡å¿…é˜…è¯»ä»¥é¿å…ç¯å¢ƒé…ç½®é”™è¯¯**
- **è´¨é‡æ§åˆ¶**ï¼š
  - æ ¼å¼åŒ–ï¼š`python scripts/format_code.py`
  - é™æ€åˆ†æï¼š`python scripts/run_clang_tidy.py` (Windows + MSVC ç¯å¢ƒä¸‹è·³è¿‡)
- **å¼€å‘åŸåˆ™**ï¼š
  - **æ™ºèƒ½æŒ‡é’ˆä¼˜å…ˆäºè£¸æŒ‡é’ˆ**ã€‚
  - **RAII**ã€‚
  - **PIMPL**ã€‚
  - **ç»„åˆä¼˜äºç»§æ‰¿**ã€‚
  - **é¿å…ä½¿ç”¨å…¨å±€å˜é‡**ã€‚
- **æ¨¡å—å¼€å‘å†›è§„**ï¼š
  1. **è®¾è®¡æ¨¡å¼**ï¼šä¼˜å…ˆä½¿ç”¨å„ç§è®¾è®¡æ¨¡å¼ï¼Œå¦‚å·¥å‚æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ç­‰ã€‚
  2. **ç‰©ç†ä¾èµ–**ï¼šåœ¨ `CMakeLists.txt` ä¸­ï¼Œ`FILE_SET cxx_modules` å¿…é¡»åŒ…å«æ‰€æœ‰ `.ixx`ï¼Œä¸”é¡ºåºæ­£ç¡®ï¼ˆä¾èµ–æ–¹åœ¨åï¼‰ã€‚

## é¡¹ç›®ç®¡ç†è§„èŒƒ
- **åˆ†æ”¯ç­–ç•¥**ï¼š
  - **ä¸¥ç¦ç›´æ¨ä¸»åˆ†æ”¯**ã€‚
  - **æµç¨‹**ï¼šåŸºäºä¸»åˆ†æ”¯æ–°å»º -> å®ç°ä¸æµ‹è¯• -> éªŒæ”¶é€šè¿‡ -> åˆå¹¶ä¸»åˆ†æ”¯å¹¶åˆ é™¤ã€‚
  - **å‘½å**ï¼š`feature/plan-{name}` æˆ– `fix/task-{name}`ã€‚
- **æ–‡æ¡£ç®¡ç†** (`/docs/dev_docs/`)ï¼š
  - è®¡åˆ’ï¼š`plan/{name}/C++_plan_{title}.md` (ä½¿ç”¨ `docs/dev_docs/C++_plan_template.md`)
  - ä»»åŠ¡ï¼š`plan/{name}/task/C++_task_{title}.md` (ä½¿ç”¨ `docs/dev_docs/C++_task_template.md`)
  - è¯„ä¼°ï¼š`evaluation/C++_evaluation_{title}.md` (ä½¿ç”¨ `docs/dev_docs/C++_evaluation_template.md`)
  - è®°å½•ï¼š`C++_troubleshooting.md` (è®°å½•ç–‘éš¾æ‚ç—‡, ä½¿ç”¨ `docs/dev_docs/C++_troubleshooting.md`)
- **æäº¤è¦æ±‚**ï¼š
  - ä»…æäº¤æºç ä¸å¿…è¦èµ„æºï¼Œç¦æ­¢æäº¤æ–‡æ¡£ã€æ—¥å¿—æˆ–æ„å»ºæ–‡ä»¶(é™¤éç”¨æˆ·æ˜ç¡®è¦æ±‚)ã€‚
  - æ–‡ä»¶é‡å‘½å/ç§»åŠ¨å¿…é¡»ä½¿ç”¨ `git mv`ã€‚
  - æäº¤å‰å¿…é¡»é€šè¿‡ `build.py test`ã€‚

## â›” ç»å¯¹ç¦ä»¤ (Violations trigger STOP)
- **ç›´æ¥åœ¨ä¸»åˆ†æ”¯å¼€å‘**ï¼šæ£€æµ‹åˆ° `git status` ä¸º `windows/dev` æˆ– `master` æ—¶ä¿®æ”¹ä»£ç ã€‚
- **æ— æ–‡æ¡£å³ä»£ç **ï¼šåœ¨æœªåˆ›å»º/æ›´æ–° `docs/` ä¸‹å¯¹åº”æ–‡æ¡£å‰ç¼–å†™ä¸šåŠ¡ä»£ç ã€‚
- **æ— æµ‹è¯•å³æäº¤**ï¼šåœ¨æœªè¿è¡Œ `build.py test` å¹¶æˆªå›¾/è´´å‡ºæ—¥å¿—å‰è¿›è¡Œ git commitï¼ˆæ–‡æ¡£/æ³¨é‡Šç­‰éä»£ç ç±»å˜æ›´åŠ `docs/` ç›®å½•ä¸‹å†…å®¹é™¤å¤–ï¼‰ã€‚
- **å¹»è§‰å¼•ç”¨**ï¼šå¼•ç”¨ä¸å­˜åœ¨çš„æ–‡ä»¶è·¯å¾„ï¼ˆå¿…é¡»å…ˆ `ls` æˆ– `glob` ç¡®è®¤æ–‡ä»¶å­˜åœ¨ï¼‰ã€‚
- **ä¸¥ç¦é€’å½’åˆ é™¤** `build` ç›®å½•åŠå…¶å­æ–‡ä»¶ã€‚
- **ä¸¥ç¦æäº¤** æœªé€šè¿‡ç¼–è¯‘æˆ–åŸºç¡€æµ‹è¯•çš„ä»£ç ã€‚
- **ä¸¥ç¦å‘æ„å»ºè„šæœ¬ä¼ é€’ --clean å‚æ•°** å¯é€šè¿‡åˆ é™¤ cmake ç¼“å­˜è¾¾åˆ°ç›¸åŒæ•ˆæœ
